[TOC]

## 1 并发概念

个人认为并发是基于CPU时间片和OS任务调度;并行基于CPU多处理核心;编程中的并发是广义的往往包含并行的概念。

+ **为何要用并发？**

  其实只有一个目的充分利用CPU资源，有人说还为了实现异步，异步不就是把一个任务拆分成多个可以同时执行的组件参与空闲的时间片竞争并执行么。

  充分利用CPU资源、更快地处理速度、实现异步（异步是充分使用CPU资源的另一种表述，而更快的处理速度是充分利用CPU资源的结果）。

  吐槽：总是有很多人把一个东西从不同角度說一边，然后堆起来，还不讲清关系，让人理解起来乱糟糟的。

+ **如何将CPU的多核心充分应用起来？**

  个人任务只能优化软件底层实现了，比如研发新语言，如Go语言，它天然支持高并发多线程是因为它优化了线程上下文切换（自己有协程调度管理器）和线程资源（开启一个协程只需要2K的内存）开销。

+ **并发涉及哪些基本概念？**

  threads、locks、condition queues、thread pool、blocking queues、concurrent collections、fork-join、 parallel streams 等等。



## 2 并发编程带来的风险

+ **安全性问题**

  - 多线程访问共享数据导致结果偏差

+ **活跃性问题**

  - 死锁

  - 活锁

  - 饥饿

  - 无锁

    没有对资源进行锁定，即所有的线程都能访问并修改同一个资源，但同时只有一个线程能修改成功。

+ **性能问题**

  为什么硬件上可以将处理器核心堆到很多，但是软件确用不起来？因为同时引入了下面这些问题。当线程数量增加到一定值时，任务处理速度不升反降。

  - 频繁的上下文切换

  - 线程同步开销

  - 线程本身的开销

    

## 3 进程和线程

+ **两者区别**

+ **线程概念**

  - 线程安全

    定义：（自定义）多线程操作同一个共享对象不做同步，不管怎么操作，每一步操作完成后结果都是固定的符合期望的。

    线程共享对象中哪些内容不做同步会有线程安全问题？

## 4 遗留问题

为何当线程数量增加到一定值时，任务处理速度不升反降？何时会发生进程、线程上下文切换？切换过程涉及哪些系统资源？

进程和线程反映到内存、寄存器上是什么样子的？

还有很多问题只知道概念，不清楚实现原理，要理解明白需要深入到编译器原理，操作系统内核。

基础好难 

